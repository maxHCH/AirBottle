(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-772b1aab"],{1799:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination justify-content-center "},[e("li",{staticClass:"page-item px-2 ",class:{disabled:!t.pagination.has_pre}},[e("a",{staticClass:"page-link ",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.getProducts(t.pagination.current_page-1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pagination.total_pages,function(a){return e("li",{key:a,staticClass:"page-item",class:{active:t.pagination.current_page===a}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.getProducts(a)}}},[t._v(t._s(a))])])}),e("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_next}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.getProducts(t.pagination.current_page+1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])])},i=[],r={props:["pagination"],methods:{getProducts:function(t){this.$emit("getPageProducts",t)}}},c=r,n=e("2877"),o=Object(n["a"])(c,s,i,!1,null,null,null);a["a"]=o.exports},2204:function(t,a,e){},"3d11":function(t,a,e){"use strict";var s=e("f19f"),i=e.n(s);i.a},"66c1":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("Cart",{staticClass:"sticky-top",attrs:{cartList:t.cartData,cartLength:t.cartLength},on:{removeCart:t.removeCart}}),e("div",[e("div",{staticClass:"row mx-0"},[e("div",{staticClass:"col-lg-2 "},[e("nav",{staticClass:"nav flex-lg-column pt-3 pl-1 h-100 justify-content-lg-start justify-content-center"},[e("a",{staticClass:"nav-link hover-link text-secondary ",class:{"sidebar-active":"all"===t.clickCategory},attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.assort("all")}}},[e("i",{staticClass:"fas fa-rainbow mr-2 text-info"}),t._v("多樣的空氣")]),e("a",{staticClass:"nav-link hover-link text-secondary",class:{"sidebar-active":"山"===t.clickCategory},attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.assort("山")}}},[e("i",{staticClass:"fas fa-tree text-success mr-2"}),t._v("山中的空氣")]),e("a",{staticClass:"nav-link hover-link text-secondary",class:{"sidebar-active":"海"===t.clickCategory},attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.assort("海")}}},[e("i",{staticClass:"fas fa-water mr-2 text-primary"}),t._v("海中的空氣")]),e("a",{staticClass:"nav-link hover-link text-secondary",class:{"sidebar-active":"田野"===t.clickCategory},attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.assort("田野")}}},[e("i",{staticClass:"fas fa-seedling text-warning mr-2"}),t._v("田野的空氣")])])]),t.detail?t._e():e("div",{staticClass:"col-lg-10"},[e("div",{staticClass:"row mt-2"},t._l(t.products,function(a){return e("div",{directives:[{name:"show",rawName:"v-show",value:t.clickCategory===a.category||"all"===t.clickCategory,expression:"clickCategory === item.category || clickCategory === 'all'"}],key:a.id,staticClass:"col-md-4 mb-4"},[e("div",{staticClass:"card border-0 shadow"},[e("div",{staticStyle:{height:"200px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+a.imageUrl+")"}}),e("div",{staticClass:"card-body pb-0 mt-2"},[e("span",{staticClass:"badge badge-info float-right ml-2"},[t._v(t._s(a.category))]),e("h5",{staticClass:"card-title"},[e("a",{staticClass:"text-secondary",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.productDetail(a)}}},[t._v(t._s(a.title))])]),e("div",{staticClass:"text-right mt-5"},[a.price?t._e():e("div",{staticClass:"h5 py-2"},[t._v(t._s(t._f("currency")(a.origin_price)))]),a.price?e("del",{staticClass:"h6 py-2 text-muted"},[t._v(t._s(t._f("currency")(a.origin_price))+" ")]):t._e(),e("div",{staticClass:"h5 py-2 text-danger"},[t._v(t._s(t._f("currency")(a.price)))])])]),e("div",{staticClass:"card-footer d-flex bg-transparent border-0"},[e("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.productDetail(a)}}},[t.status.fileLoading===a.id?e("i",{staticClass:"fas fa-spinner fa-spin mr-2"}):e("i",{staticClass:"fas fa-chevron-circle-right mr-2"}),t._v("查看更多\n                                ")]),e("button",{staticClass:"btn btn-desert ml-auto",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.addProduct(a.id)}}},[t.status.cartLoading===a.id?e("i",{staticClass:"fas fa-spinner fa-spin mr-2"}):t._e(),e("i",{staticClass:"fas fa-cart-plus "})])])])])}),0),e("Pagination",{attrs:{pagination:t.pagination},on:{getPageProducts:t.getProducts}})],1),t.detail?e("div",{staticClass:"col-lg-10 px-0 mt-3"},[e("div",{staticClass:"row mx-0 py-3"},[e("div",{staticClass:"col-lg-8"},[e("div",{staticStyle:{height:"400px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+t.product.imageUrl+")"}})]),e("div",{staticClass:"col-lg-4 pt-5"},[e("h5",{staticClass:"text-dark"},[t._v(t._s(t.product.title))]),e("hr"),e("blockquote",{staticClass:"py-3 text-muted"},[e("p",[t._v(t._s(t.product.content))]),e("footer",[t._v(t._s(t.product.description))])]),e("div",{staticClass:"text-right pt-3"},[t.product.price?t._e():e("div",{staticClass:"h5"},[t._v("價格"+t._s(t._f("currency")(t.product.origin_price)))]),t.product.price?e("div",{staticClass:"h5 text-secondary"},[t._v("價格 "+t._s(t._f("currency")(t.product.price))+" 元")]):t._e()]),e("div",{staticClass:"form-group"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.product.num,expression:"product.num"}],staticClass:"form-control",attrs:{id:"itemSelect"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.product,"num",a.target.multiple?e:e[0])}}},t._l(10,function(a){return e("option",{key:a,domProps:{value:a}},[t._v("選購 "+t._s(a)+" "+t._s(t.product.unit))])}),0)]),t.product.num?e("div",{staticClass:"text-muted h6 mr-3 mb-0 text-nowrap text-right pt-2"},[t._v("\n                        總計 "),t.product.price?e("strong",{staticClass:"text-success"},[t._v(t._s(t._f("currency")(t.product.price*t.product.num))+" 元")]):t._e(),t.product.price?t._e():e("strong",{staticClass:"text-success"},[t._v(t._s(t._f("currency")(t.product.origin_price*t.product.num))+" 元")])]):t._e(),e("div",{staticClass:"text-right mt-3"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.getProducts(a)}}},[e("i",{staticClass:"fas fa-chevron-circle-left mr-2"}),t._v("返回")]),e("button",{staticClass:"ml-2 btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addProduct(t.product.id,t.product.num)}}},[e("i",{staticClass:"fas fa-cart-plus mr-2"}),t._v("加入購物車")])])])])]):t._e()])])],1)},i=[],r=e("1157"),c=e.n(r),n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"dropdown d-flex "},[e("a",{staticClass:"dropdown-toggle mt-2 pr-4 ml-auto",attrs:{id:"dropdownMenuLink","data-toggle":"dropdown",href:"javascript:;",role:"button"}},[e("i",{staticClass:"fas cart-i pl-1 fa-2x fa-shopping-cart text-desert"},[t.cartLength?e("div",{staticClass:"badgeCart text-white bg-danger text-center"},[t._v(t._s(t.cartLength))]):t._e()])]),e("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuLink"}},[e("p",{staticClass:"pl-3 py-0"},[t._v("已選擇的商品")]),e("table",{staticClass:"table"},[e("tbody",t._l(t.cartList.carts,function(a){return e("tr",{key:a.id},[e("td",{attrs:{width:"50"}},[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return e.preventDefault(),t.removeCart(a.id)}}},[e("i",{staticClass:"far fa-trash-alt text-danger"})])]),e("td",[t._v(t._s(a.product.title))]),e("td",[t._v(t._s(a.qty)+"/"+t._s(a.product.unit))]),e("td",[t._v(t._s(t._f("currency")(a.final_total))+" 元")])])}),0)]),e("div",{staticClass:"px-2"},[e("router-link",{staticClass:"btn btn-desert btn-block",attrs:{to:"/create_order"}},[e("i",{staticClass:"fas fa-shopping-cart pr-2"}),t._v("結帳去\n                ")])],1)])])])},o=[],l={props:{cartList:{carts:{product:{},length:""}},cartLength:""},methods:{removeCart:function(t){this.$emit("removeCart",t)}}},d=l,u=(e("3d11"),e("2877")),p=Object(u["a"])(d,n,o,!1,null,"38a30213",null),g=p.exports,f=e("1799"),v={data:function(){return{products:[],product:{},isLoading:!1,pagination:{},status:{fileLoading:"",cartLoading:""},detail:!1,cartData:{},cartLength:"",clickCategory:"all"}},methods:{getProducts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this,e="".concat(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_APIPATH,"/api/").concat(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_CUSTOMPATH,"/products?page=").concat(t);a.isLoading=!0,this.$http.get(e).then(function(t){a.isLoading=!1,a.detail=!1,t.data.success&&(a.products=t.data.products,a.pagination=t.data.pagination)})},productDetail:function(t){var a=this,e=this,s="".concat(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_APIPATH,"/api/").concat(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_CUSTOMPATH,"/product/").concat(t.id);e.status.fileLoading=t.id,e.$http.get(s).then(function(t){e.status.fileLoading="",e.product=t.data.product,e.$set(a.product,"num",1),e.detail=!0})},addProduct:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=this,s="".concat(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_APIPATH,"/api/").concat(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_CUSTOMPATH,"/cart"),i={product_id:t,qty:a};e.status.cartLoading=t,e.$http.post(s,{data:i}).then(function(t){e.status.cartLoading="",c()("#productModal").modal("hide"),e.getCart()})},getCart:function(){var t=this,a="".concat(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_APIPATH,"/api/").concat(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_CUSTOMPATH,"/cart");t.$http.get(a).then(function(a){t.cartData=a.data.data,t.cartLength=a.data.data.carts.length})},removeCart:function(t){var a=this,e="".concat(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_APIPATH,"/api/").concat(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_CUSTOMPATH,"/cart/").concat(t);a.$http.delete(e).then(function(t){t.data.success&&a.getCart()})},assort:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",a=this;a.clickCategory=t,a.detail=!1}},created:function(){this.getProducts(),this.getCart()},components:{Cart:g,Pagination:f["a"]}},_=v,C=(e("89a1"),Object(u["a"])(_,s,i,!1,null,"6f989cf9",null));a["default"]=C.exports},"89a1":function(t,a,e){"use strict";var s=e("2204"),i=e.n(s);i.a},f19f:function(t,a,e){}}]);
//# sourceMappingURL=chunk-772b1aab.ae826aa8.js.map