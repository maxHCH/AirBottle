{"version":3,"sources":["webpack:///./src/views/CreateOrder.vue?f92e","webpack:///src/views/CreateOrder.vue","webpack:///./src/views/CreateOrder.vue?c671","webpack:///./src/views/CreateOrder.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","attrs","id","_v","_s","_f","carts","final_total","aria-labelledby","data-parent","_l","item","key","width","href","on","click","$event","preventDefault","removeCart","product","title","qty","unit","total","colspan","_e","directives","name","rawName","value","expression","type","placeholder","domProps","input","target","composing","coupon_code","addCouponCode","submit","ckeckoutOrder","for","form","user","$set","errors","has","first","class","is-invalid","cols","rows","to","staticRenderFns","data-toggle","data-target","aria-expanded","aria-controls","CreateOrdervue_type_script_lang_js_","data","email","tel","address","message","methods","getCart","vm","api","concat","$http","get","then","response","console","log","delete","success","coupon","code","post","userdata","$validator","validate","valid","$router","push","orderId","created","views_CreateOrdervue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d0ccf18.b6d03de8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"container\"},[_vm._m(0),_c('div',{staticClass:\"row justify-content-center mt-4\"},[_c('div',{staticClass:\"col-lg-8\"},[_c('div',{staticClass:\"container mb-3\"},[_c('div',{staticClass:\"accordion\",attrs:{\"id\":\"accordionExample\"}},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header d-flex \",attrs:{\"id\":\"headingOne\"}},[_vm._m(1),_c('h3',{staticClass:\"text-right ml-auto\"},[_vm._v(\"\\n                                    \"+_vm._s(_vm._f(\"currency\")(_vm.carts.final_total))+\"\\n                                \")])]),_c('div',{staticClass:\"collapse\",attrs:{\"id\":\"collapseOne\",\"aria-labelledby\":\"headingOne\",\"data-parent\":\"#accordionExample\"}},[_c('div',{staticClass:\"card-body\"},[_c('table',{staticClass:\"table\"},[_c('tbody',[_vm._l((_vm.carts.carts),function(item){return _c('tr',{key:item.id},[_c('td',{attrs:{\"width\":\"50\"}},[_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){$event.preventDefault();return _vm.removeCart(item.id)}}},[_c('i',{staticClass:\"far fa-trash-alt text-danger\"})])]),_c('td',[_vm._v(_vm._s(item.product.title))]),_c('td',[_vm._v(_vm._s(item.qty)+\"/\"+_vm._s(item.product.unit))]),_c('td',{staticClass:\"text-right\"},[_vm._v(_vm._s(_vm._f(\"currency\")(item.final_total))+\" 元\")])])}),_c('tr',[(_vm.carts.total==_vm.carts.final_total)?_c('td',{staticClass:\"text-right\",attrs:{\"colspan\":\"4\"}},[_vm._v(\"\\n                                                    售價 \"),_c('strong',[_vm._v(_vm._s(_vm._f(\"currency\")(_vm.carts.total))+\" 元\")])]):_vm._e()]),_c('tr',[(_vm.carts.total!=_vm.carts.final_total)?_c('td',{staticClass:\"text-right text-danger\",attrs:{\"colspan\":\"4\"}},[_vm._v(\"\\n                                                    優惠特價 \"),_c('strong',[_vm._v(_vm._s(_vm._f(\"currency\")(_vm.carts.final_total))+\" 元\")])]):_vm._e()])],2)])])])])]),_c('div',{staticClass:\"input-group mb-3 input-group-sm\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.coupon_code),expression:\"coupon_code\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"請輸入優惠碼\"},domProps:{\"value\":(_vm.coupon_code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.coupon_code=$event.target.value}}}),_c('div',{staticClass:\"input-group-append\"},[_c('button',{staticClass:\"btn btn-outline-secondary\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();return _vm.addCouponCode($event)}}},[_vm._v(\"\\n                            套用優惠碼\\n                            \")])])]),_c('div',{staticClass:\"my-5 row justify-content-center\"},[_c('form',{staticClass:\"col-md-10\",on:{\"submit\":function($event){$event.preventDefault();return _vm.ckeckoutOrder($event)}}},[_c('div',{staticClass:\"bg-light py-3 h4 text-center\"},[_vm._v(\"訂購人資訊\")]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"useremail\"}},[_vm._v(\"Email\")]),_c('input',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required|email'),expression:\"'required|email'\"},{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.email),expression:\"form.user.email\"}],staticClass:\"form-control\",attrs:{\"type\":\"email\",\"name\":\"email\",\"id\":\"useremail\",\"placeholder\":\"請輸入 Email\"},domProps:{\"value\":(_vm.form.user.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"email\", $event.target.value)}}}),(_vm.errors.has('email'))?_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(_vm.errors.first('email')))]):_vm._e()]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"username\"}},[_vm._v(\"收件人姓名\")]),_c('input',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required'),expression:\"'required'\"},{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.name),expression:\"form.user.name\"}],staticClass:\"form-control\",class:{'is-invalid':_vm.errors.has('name')},attrs:{\"type\":\"text\",\"name\":\"name\",\"id\":\"username\",\"placeholder\":\"輸入姓名\"},domProps:{\"value\":(_vm.form.user.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"name\", $event.target.value)}}}),(_vm.errors.has('name'))?_c('span',{staticClass:\"text-danger\"},[_vm._v(\"請輸入姓名欄位\")]):_vm._e()]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"usertel\"}},[_vm._v(\"收件人電話\")]),_c('input',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required'),expression:\"'required'\"},{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.tel),expression:\"form.user.tel\"}],staticClass:\"form-control\",class:{'is-invalid':_vm.errors.has('tel')},attrs:{\"type\":\"tel\",\"name\":\"tel\",\"id\":\"usertel\",\"placeholder\":\"請輸入電話\"},domProps:{\"value\":(_vm.form.user.tel)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"tel\", $event.target.value)}}}),(_vm.errors.has('tel'))?_c('span',{staticClass:\"text-danger\"},[_vm._v(\"請輸入電話欄位\")]):_vm._e()]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"useraddress\"}},[_vm._v(\"收件人地址\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.address),expression:\"form.user.address\"},{name:\"validate\",rawName:\"v-validate\",value:('required'),expression:\"'required'\"}],staticClass:\"form-control\",class:{'is-invalid':_vm.errors.has('address')},attrs:{\"type\":\"text\",\"name\":\"address\",\"id\":\"useraddress\",\"placeholder\":\"請輸入地址\"},domProps:{\"value\":(_vm.form.user.address)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"address\", $event.target.value)}}}),(_vm.errors.has('address'))?_c('span',{staticClass:\"text-danger\"},[_vm._v(\"請輸入地址欄位\")]):_vm._e()]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"comment\"}},[_vm._v(\"留言\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.message),expression:\"form.message\"}],staticClass:\"form-control\",attrs:{\"name\":\"\",\"id\":\"comment\",\"cols\":\"30\",\"rows\":\"10\"},domProps:{\"value\":(_vm.form.message)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"message\", $event.target.value)}}})]),_c('div',{staticClass:\"text-right\"},[_c('router-link',{staticClass:\"btn btn-outline-desert\",attrs:{\"to\":\"/air_products\"}},[_c('i',{staticClass:\"fas fa-chevron-circle-left mr-2\"}),_vm._v(\"繼續購物\")]),_vm._m(2)],1)])])])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('ul',{staticClass:\"nav justify-content-around py-3 text-center\"},[_c('li',{staticClass:\"nav-item p-3 bg-desert text-light rounded-pill w-25\"},[_vm._v(\"填寫訂單資料\")]),_c('li',{staticClass:\"nav-item p-3 text-secondary rounded-pill w-25\"},[_vm._v(\"確認資料及付款\")]),_c('li',{staticClass:\"nav-item p-3 text-secondary rounded-pill w-25\"},[_vm._v(\"完成\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',{staticClass:\"mb-0\"},[_c('button',{staticClass:\"btn btn-link\",attrs:{\"type\":\"button\",\"data-toggle\":\"collapse\",\"data-target\":\"#collapseOne\",\"aria-expanded\":\"true\",\"aria-controls\":\"collapseOne\"}},[_vm._v(\"\\n                                    查看訂單\\n                                    \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"btn btn-outline-primary ml-2\"},[_c('i',{staticClass:\"far fa-paper-plane mr-2\"}),_vm._v(\"送出訂單\")])}]\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <div class=\"container\">\n            <div>\n                <ul class=\"nav justify-content-around py-3 text-center\">\n                    <li class=\"nav-item p-3 bg-desert text-light rounded-pill w-25\">填寫訂單資料</li>\n                    <li class=\"nav-item p-3 text-secondary rounded-pill w-25\">確認資料及付款</li>\n                    <li class=\"nav-item p-3 text-secondary rounded-pill w-25\">完成</li>\n                </ul>\n            </div>\n            <div class=\"row justify-content-center mt-4\">\n                <div class=\"col-lg-8\">\n                    <div class=\"container mb-3\">\n                        <div class=\"accordion\" id=\"accordionExample\">\n                            <div class=\"card\">\n                                <div class=\"card-header d-flex \" id=\"headingOne\">\n                                    <h2 class=\"mb-0\">\n                                        <button class=\"btn btn-link\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseOne\" aria-expanded=\"true\" aria-controls=\"collapseOne\">\n                                        查看訂單\n                                        </button>\n                                    </h2>\n                                    <h3 class=\"text-right ml-auto\">\n                                        {{carts.final_total | currency}}\n                                    </h3>\n                                </div>\n                                <div id=\"collapseOne\" class=\"collapse\" aria-labelledby=\"headingOne\" data-parent=\"#accordionExample\">\n                                    <div class=\"card-body\">\n                                        <table class=\"table\">\n                                            <tbody>\n                                                <tr v-for=\"item in carts.carts\" :key=\"item.id\">\n                                                    <td width=\"50\">\n                                                        <a href=\"javascript:;\" @click.prevent=\"removeCart(item.id)\">\n                                                            <i class=\"far fa-trash-alt text-danger\"></i>\n                                                        </a>\n                                                    </td>\n                                                    <td>{{item.product.title}}</td>\n                                                    <td>{{item.qty}}/{{item.product.unit}}</td>\n                                                    <td class=\"text-right\">{{item.final_total | currency}} 元</td>\n                                                </tr>\n                                                <tr>\n                                                    <td  colspan=\"4\" class=\"text-right\" v-if=\"carts.total==carts.final_total\">\n                                                        售價 <strong>{{carts.total | currency}} 元</strong>\n                                                    </td>\n                                                </tr>\n                                                <tr>\n                                                    <td  colspan=\"4\" class=\"text-right text-danger\" v-if=\"carts.total!=carts.final_total\">\n                                                        優惠特價 <strong>{{carts.final_total | currency}} 元</strong>\n                                                    </td>\n                                                </tr>\n                                            </tbody>\n                                        </table>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"input-group mb-3 input-group-sm\">\n                            <input type=\"text\" class=\"form-control\" v-model=\"coupon_code\" placeholder=\"請輸入優惠碼\">\n                            <div class=\"input-group-append\">\n                                <button @click.prevent=\"addCouponCode\" class=\"btn btn-outline-secondary\" type=\"button\">\n                                套用優惠碼\n                                </button>\n                            </div>\n                        </div>\n                        \n                        <div class=\"my-5 row justify-content-center\">\n                            <form class=\"col-md-10\" @submit.prevent=\"ckeckoutOrder\">\n                                <div class=\"bg-light py-3 h4 text-center\">訂購人資訊</div>\n                                <div class=\"form-group\">\n                                    <label for=\"useremail\" >Email</label>\n                                    <input type=\"email\" class=\"form-control\" name=\"email\" id=\"useremail\"\n                                    v-validate=\"'required|email'\" v-model=\"form.user.email\" placeholder=\"請輸入 Email\">\n                                    <span class=\"text-danger\" v-if=\"errors.has('email')\">{{ errors.first('email') }}</span>\n                                </div>\n                            \n                                <div class=\"form-group\">\n                                    <label for=\"username\">收件人姓名</label>\n                                    <input type=\"text\" class=\"form-control\" name=\"name\" id=\"username\"\n                                    v-validate=\"'required'\" :class=\"{'is-invalid':errors.has('name')}\" v-model=\"form.user.name\" placeholder=\"輸入姓名\">\n                                    <span class=\"text-danger\" v-if=\"errors.has('name')\">請輸入姓名欄位</span>\n                                </div>\n                            \n                                <div class=\"form-group\">\n                                    <label for=\"usertel\">收件人電話</label>\n                                    <input type=\"tel\" class=\"form-control\" name=\"tel\" id=\"usertel\" \n                                    v-validate=\"'required'\" :class=\"{'is-invalid':errors.has('tel')}\" v-model=\"form.user.tel\" placeholder=\"請輸入電話\">\n                                    <span class=\"text-danger\" v-if=\"errors.has('tel')\">請輸入電話欄位</span>\n                                </div>\n                            \n                                <div class=\"form-group\">\n                                    <label for=\"useraddress\">收件人地址</label>\n                                    <input type=\"text\" class=\"form-control\" name=\"address\" id=\"useraddress\" v-model=\"form.user.address\"\n                                    v-validate=\"'required'\" :class=\"{'is-invalid':errors.has('address')}\" placeholder=\"請輸入地址\">\n                                    <span class=\"text-danger\" v-if=\"errors.has('address')\">請輸入地址欄位</span>\n                                </div>\n                            \n                                <div class=\"form-group\">\n                                    <label for=\"comment\">留言</label>\n                                    <textarea name=\"\" id=\"comment\" class=\"form-control\" cols=\"30\" rows=\"10\" v-model=\"form.message\"></textarea>\n                                </div>\n                                <div class=\"text-right\">\n                                    <router-link to=\"/air_products\" class=\"btn btn-outline-desert\">\n                                    <i class=\"fas fa-chevron-circle-left mr-2\"></i>繼續購物</router-link>\n                                    <button class=\"btn btn-outline-primary ml-2\">\n                                        <i class=\"far fa-paper-plane mr-2\"></i>送出訂單</button>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    data(){\n        return{\n            carts: {},\n            coupon_code: '',\n            form:{\n                user: {\n                    name : '',\n                    email : '',\n                    tel : '',\n                    address : '',\n                },\n                message: '',\n            }\n        }\n    },\n    methods:{\n        getCart(){\n            const vm = this;\n            const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/cart`\n            vm.$http.get(api).then((response) => {\n                console.log(response.data)\n                vm.carts = response.data.data;\n            })\n        },\n        removeCart(id){\n            const vm = this;\n            const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/cart/${id}`\n            vm.$http.delete(api).then((response) => {\n                if(response.data.success){\n                    vm.getCart();\n                }\n            })\n        },\n        addCouponCode(){\n            const vm = this;\n            const coupon = {\n                code : vm.coupon_code,\n            };\n            const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/coupon`\n            vm.$http.post(api,{data:coupon}).then((response) => {\n                console.log(response.data)\n                if(response.data.success){\n                    vm.getCart();\n                }\n            })\n        },\n        ckeckoutOrder(){\n            const vm = this;\n            const userdata = vm.form;\n            const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/order`\n            this.$validator.validate().then((valid) => {\n                if (valid) {\n                    vm.$http.post(api,{data:userdata}).then((response) => {\n                        console.log(response.data)\n                        if(response.data.success){\n                            vm.$router.push(`/checkout_order/${response.data.orderId}`)\n                        }\n                    })\n                }else{\n                    console.log('欄位不完整');\n                }\n            });\n            \n        },\n        \n    },\n    created(){\n        this.getCart();\n    }\n\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateOrder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateOrder.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CreateOrder.vue?vue&type=template&id=5a149eee&\"\nimport script from \"./CreateOrder.vue?vue&type=script&lang=js&\"\nexport * from \"./CreateOrder.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}