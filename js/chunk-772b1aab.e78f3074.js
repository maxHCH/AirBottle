(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-772b1aab"],{1799:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("nav",{attrs:{"aria-label":"Page navigation example"}},[s("ul",{staticClass:"pagination justify-content-center "},[s("li",{staticClass:"page-item px-2 ",class:{disabled:!t.pagination.has_pre}},[s("a",{staticClass:"page-link ",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.getProducts(t.pagination.current_page-1)}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pagination.total_pages,function(a){return s("li",{key:a,staticClass:"page-item",class:{active:t.pagination.current_page===a}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.getProducts(a)}}},[t._v(t._s(a))])])}),s("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_next}},[s("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.getProducts(t.pagination.current_page+1)}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])])},i=[],r={props:["pagination"],methods:{getProducts:function(t){this.$emit("getPageProducts",t)}}},c=r,n=s("2877"),o=Object(n["a"])(c,e,i,!1,null,null,null);a["a"]=o.exports},2204:function(t,a,s){},"3d11":function(t,a,s){"use strict";var e=s("f19f"),i=s.n(e);i.a},"66c1":function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),s("Cart",{staticClass:"sticky-top",attrs:{cartList:t.cartData,cartLength:t.cartLength},on:{removeCart:t.removeCart}}),s("div",[s("div",{staticClass:"row mx-0"},[s("div",{staticClass:"col-lg-2 "},[s("nav",{staticClass:"nav flex-lg-column pt-3 pl-1 h-100 justify-content-lg-start justify-content-center"},[s("a",{staticClass:"nav-link hover-link text-secondary ",class:{"sidebar-active":"all"===t.clickCategory},attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.assort("all")}}},[s("i",{staticClass:"fas fa-rainbow mr-2 text-info"}),t._v("多樣的空氣")]),s("a",{staticClass:"nav-link hover-link text-secondary",class:{"sidebar-active":"山"===t.clickCategory},attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.assort("山")}}},[s("i",{staticClass:"fas fa-tree text-success mr-2"}),t._v("山中的空氣")]),s("a",{staticClass:"nav-link hover-link text-secondary",class:{"sidebar-active":"海"===t.clickCategory},attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.assort("海")}}},[s("i",{staticClass:"fas fa-water mr-2 text-primary"}),t._v("海中的空氣")]),s("a",{staticClass:"nav-link hover-link text-secondary",class:{"sidebar-active":"田野"===t.clickCategory},attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.assort("田野")}}},[s("i",{staticClass:"fas fa-seedling text-warning mr-2"}),t._v("田野的空氣")])])]),t.detail?t._e():s("div",{staticClass:"col-lg-10"},[s("div",{staticClass:"row mt-2"},t._l(t.products,function(a){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.clickCategory===a.category||"all"===t.clickCategory,expression:"clickCategory === item.category || clickCategory === 'all'"}],key:a.id,staticClass:"col-md-4 mb-4"},[s("div",{staticClass:"card border-0 shadow"},[s("div",{staticStyle:{height:"200px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+a.imageUrl+")"}}),s("div",{staticClass:"card-body pb-0 mt-2"},[s("span",{staticClass:"badge badge-info float-right ml-2"},[t._v(t._s(a.category))]),s("h5",{staticClass:"card-title"},[s("a",{staticClass:"text-secondary",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.productDetail(a)}}},[t._v(t._s(a.title))])]),s("div",{staticClass:"text-right mt-5"},[a.price?t._e():s("div",{staticClass:"h5 py-2"},[t._v(t._s(t._f("currency")(a.origin_price)))]),a.price?s("del",{staticClass:"h6 py-2 text-muted"},[t._v(t._s(t._f("currency")(a.origin_price))+" ")]):t._e(),s("div",{staticClass:"h5 py-2 text-danger"},[t._v(t._s(t._f("currency")(a.price)))])])]),s("div",{staticClass:"card-footer d-flex bg-transparent border-0"},[s("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.productDetail(a)}}},[t.status.fileLoading===a.id?s("i",{staticClass:"fas fa-spinner fa-spin mr-2"}):s("i",{staticClass:"fas fa-chevron-circle-right mr-2"}),t._v("查看更多\n                                ")]),s("button",{staticClass:"btn btn-desert ml-auto",attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.addProduct(a.id)}}},[t.status.cartLoading===a.id?s("i",{staticClass:"fas fa-spinner fa-spin mr-2"}):t._e(),s("i",{staticClass:"fas fa-cart-plus "})])])])])}),0),s("Pagination",{attrs:{pagination:t.pagination},on:{getPageProducts:t.getProducts}})],1),t.detail?s("div",{staticClass:"col-lg-10 px-0 mt-3"},[s("div",{staticClass:"row mx-0 py-3"},[s("div",{staticClass:"col-lg-8"},[s("div",{staticStyle:{height:"400px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+t.product.imageUrl+")"}})]),s("div",{staticClass:"col-lg-4 pt-5"},[s("h5",{staticClass:"text-dark"},[t._v(t._s(t.product.title))]),s("hr"),s("blockquote",{staticClass:"py-3 text-muted"},[s("p",[t._v(t._s(t.product.content))]),s("footer",[t._v(t._s(t.product.description))])]),s("div",{staticClass:"text-right pt-3"},[t.product.price?t._e():s("div",{staticClass:"h5"},[t._v("價格"+t._s(t._f("currency")(t.product.origin_price)))]),t.product.price?s("div",{staticClass:"h5 text-secondary"},[t._v("價格 "+t._s(t._f("currency")(t.product.price))+" 元")]):t._e()]),s("div",{staticClass:"form-group"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.product.num,expression:"product.num"}],staticClass:"form-control",attrs:{id:"itemSelect"},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.$set(t.product,"num",a.target.multiple?s:s[0])}}},t._l(10,function(a){return s("option",{key:a,domProps:{value:a}},[t._v("選購 "+t._s(a)+" "+t._s(t.product.unit))])}),0)]),t.product.num?s("div",{staticClass:"text-muted h6 mr-3 mb-0 text-nowrap text-right pt-2"},[t._v("\n                        總計 "),t.product.price?s("strong",{staticClass:"text-success"},[t._v(t._s(t._f("currency")(t.product.price*t.product.num))+" 元")]):t._e(),t.product.price?t._e():s("strong",{staticClass:"text-success"},[t._v(t._s(t._f("currency")(t.product.origin_price*t.product.num))+" 元")])]):t._e(),s("div",{staticClass:"text-right mt-3"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.getProducts(a)}}},[s("i",{staticClass:"fas fa-chevron-circle-left mr-2"}),t._v("返回")]),s("button",{staticClass:"ml-2 btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addProduct(t.product.id,t.product.num)}}},[s("i",{staticClass:"fas fa-cart-plus mr-2"}),t._v("加入購物車")])])])])]):t._e()])])],1)},i=[],r=s("1157"),c=s.n(r),n=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"dropdown d-flex "},[s("a",{staticClass:"dropdown-toggle mt-2 pr-4 ml-auto",attrs:{id:"dropdownMenuLink","data-toggle":"dropdown",href:"javascript:;",role:"button"}},[s("i",{staticClass:"fas cart-i pl-1 fa-2x fa-shopping-cart text-desert"},[t.cartLength?s("div",{staticClass:"badgeCart text-white bg-danger text-center"},[t._v(t._s(t.cartLength))]):t._e()])]),s("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuLink"}},[s("p",{staticClass:"pl-3 py-0"},[t._v("已選擇的商品")]),s("table",{staticClass:"table"},[s("tbody",t._l(t.cartList.carts,function(a){return s("tr",{key:a.id},[s("td",{attrs:{width:"50"}},[s("a",{attrs:{href:"javascript:;"},on:{click:function(s){return s.preventDefault(),t.removeCart(a.id)}}},[s("i",{staticClass:"far fa-trash-alt text-danger"})])]),s("td",[t._v(t._s(a.product.title))]),s("td",[t._v(t._s(a.qty)+"/"+t._s(a.product.unit))]),s("td",[t._v(t._s(t._f("currency")(a.final_total))+" 元")])])}),0)]),s("div",{staticClass:"px-2"},[s("router-link",{staticClass:"btn btn-desert btn-block",attrs:{to:"/create_order"}},[s("i",{staticClass:"fas fa-shopping-cart pr-2"}),t._v("結帳去\n                ")])],1)])])])},o=[],l={props:{cartList:{carts:{product:{},length:""}},cartLength:""},methods:{removeCart:function(t){this.$emit("removeCart",t)}}},u=l,d=(s("3d11"),s("2877")),p=Object(d["a"])(u,n,o,!1,null,"38a30213",null),v=p.exports,g=s("1799"),f={data:function(){return{products:[],product:{},isLoading:!1,pagination:{},status:{fileLoading:"",cartLoading:""},detail:!1,cartData:{},cartLength:"",clickCategory:"all"}},methods:{getProducts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("handle_shoe","/products?page=").concat(t);a.isLoading=!0,this.$http.get(s).then(function(t){a.isLoading=!1,a.detail=!1,t.data.success&&(a.products=t.data.products,a.pagination=t.data.pagination)})},productDetail:function(t){var a=this,s=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("handle_shoe","/product/").concat(t.id);s.status.fileLoading=t.id,s.$http.get(e).then(function(t){s.status.fileLoading="",s.product=t.data.product,s.$set(a.product,"num",1),s.detail=!0})},addProduct:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("handle_shoe","/cart"),i={product_id:t,qty:a};s.status.cartLoading=t,s.$http.post(e,{data:i}).then(function(t){s.status.cartLoading="",c()("#productModal").modal("hide"),s.getCart()})},getCart:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("handle_shoe","/cart");t.$http.get(a).then(function(a){t.cartData=a.data.data,t.cartLength=a.data.data.carts.length})},removeCart:function(t){var a=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("handle_shoe","/cart/").concat(t);a.$http.delete(s).then(function(t){t.data.success&&a.getCart()})},assort:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",a=this;a.clickCategory=t,a.detail=!1}},created:function(){this.getProducts(),this.getCart()},components:{Cart:v,Pagination:g["a"]}},h=f,_=(s("89a1"),Object(d["a"])(h,e,i,!1,null,"6f989cf9",null));a["default"]=_.exports},"89a1":function(t,a,s){"use strict";var e=s("2204"),i=s.n(e);i.a},f19f:function(t,a,s){}}]);
//# sourceMappingURL=chunk-772b1aab.e78f3074.js.map